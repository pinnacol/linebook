Makes a heredoc statement surrounding the contents of the block.  Options:

  delimiter   the delimiter used, by default HEREDOC_n where n increments
  outdent     add '-' before the delimiter
  quote       quotes the delimiter

(options={})
  tail = "\n"
  if chain?
    rewrite(CHECK_STATUS) do |m|
      tail += m[1].lstrip
      ' '
    end
  end
  
  unless options.kind_of?(Hash)
    options = {:delimiter => options}
  end
  
  delimiter = options[:delimiter] || begin
    @heredoc_count ||= -1
    "HEREDOC_#{@heredoc_count += 1}"
  end
--
<<<%= options[:outdent] ? '-' : ' '%><%= options[:quote] ? "\"#{delimiter}\"" : delimiter %><% outdent(" # :#{delimiter}:") do %>
<% yield %>
<%= delimiter %><% end %>
<%= tail %>