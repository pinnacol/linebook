require 'erb'

# Generated by Linecook, do not edit.
module Linebook
  module Os
    module Linux
      require 'linebook/os/unix'
      include Unix
      
      def su(user='root', &block)
        target_name = guess_target_name(user)
        path = capture_path(target_name, &block)
        chown user, nil, path
        chmod 744, path
        sudo path, :E => true, :u => user
        self
      end
      
      def _su(*args, &block) # :nodoc:
        capture { su(*args, &block) }
      end
      
      def sudo(*args)
        if args.empty?
          target << 'sudo '
        else
          execute('sudo', *args)
        end
        self
      end
      
      def _sudo(*args, &block) # :nodoc:
        capture { sudo(*args, &block) }
      end
      
      # Adds the user.  Assumes the current user is root, or has root privileges.
      def useradd(name, options={})
        #  useradd <%= format_options(options) %> <%= name %>
        #  
        _erbout.concat "useradd "; _erbout.concat(( format_options(options) ).to_s); _erbout.concat " "; _erbout.concat(( name ).to_s); _erbout.concat "\n"
        self
      end
      
      def _useradd(*args, &block) # :nodoc:
        capture { useradd(*args, &block) }
      end
    end
  end
end
